# ... Plot anchors .............................................................
_:
  sweep_parameter: &sweep_param
    select_and_combine:
      fields:
        diameter:
          path: cfg/NetworkAnalyser
  x_coord: &x_coord
    x: diameter
  x_label: &x_label
    x: Target diameter

# ... Graph mean degree ........................................................
mean_degree:
  based_on: sweep_stats
  select_and_combine:
    fields:
      data_val:
        path: data/KronGen/NetworkAnalyser/graph_data/degree
  transform:
    - .mean: [!dag_tag data_val, vertex_idx]
    - operation: xr.Dataset
      kwargs:
        data_vars:
          y: !dag_prev
      tag: data
  <<: [*sweep_param, *x_coord]
  helpers:
    set_labels:
      <<: *x_label

# ... Graph num vertices .......................................................
num_vertices:
  based_on: sweep_stats
  select_and_combine:
    fields:
      data_val:
        path: data/KronGen/NetworkAnalyser/graph_data/_vertices
      transform:
        - operation: .isel
          args: [!dag_prev ]
          kwargs:
            vertex_idx: -1
        - add: [!dag_prev , 1]
  target: diameter
  <<: [*sweep_param, *x_coord]
  compute_only: [data, the_dm]

# ... Graph diameter ...........................................................
diameter:
  based_on: sweep_stats
  select_and_combine:
    fields:
      data_val:
        path: data/KronGen/NetworkAnalyser/graph_data/clustering_global
  target: diameter
  <<: [*sweep_param, *x_coord]
  compute_only: [data, the_dm]
